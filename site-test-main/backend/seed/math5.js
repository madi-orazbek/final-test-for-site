const Course = require('../models/Course');
const Module = require('../models/Module');
const Lesson = require('../models/Lesson');
const User = require('../models/User');

async function seedMath5() {
  // Создаем курс
  const teacher = await User.findOne({ role: 'teacher' });
  const course = new Course({
    title: 'Математика 5 класс',
    description: 'Полный курс математики для 5 класса',
    grade: 5,
    createdBy: teacher._id
  });
  await course.save();

  // Блоки и уроки
  const modules = [
    {
      title: 'Натуральные числа и действия с ними',
      lessons: [
        'Числа',
        'Сравнение натуральных чисел',
        'Сложение и вычитание натуральных чисел',
        'Деление и умножение натуральных чисел',
        'Деление с остатком',
        'Свойство арифметических действий',
        'Порядок выполнения действий',
        'Уравнения и способы их решения'
      ]
    },
    {
      title: 'Работа с данными и величинами',
      lessons: [
        'Единицы измерения длины, массы, времени, площади',
        'Перевод единиц',
        'Таблицы, диаграммы',
        'Простейшая статистика: среднее значение, счёт объектов',
        'Составление уравнений по текстовой задаче'
      ]
    },
    {
      title: 'Геометрические фигуры и величины',
      lessons: [
        'Точки, отрезки, лучи, прямые',
        'Углы и их виды',
        'Измерение отрезков, углов',
        'Виды многоугольников: треугольники, четырёхугольники',
        'Периметр и площадь фигур'
      ]
    },
    {
      title: 'Делимость натуральных чисел',
      lessons: [
        'Делители и кратные',
        'Простые и составные числа',
        'Признаки делимости на 2, 3, 5, 10',
        'Разложение на простые множители',
        'НОД (наибольший общий делитель)',
        'НОК (наименьшее общее кратное)',
        'Задачи на логику'
      ]
    },
    {
      title: 'Обыкновенная дробь',
      lessons: [
        'Введение. Запись и чтение обыкновенной дроби. Основные свойства',
        'Сравнение дроби',
        'Сложение и вычитание обыкновенной дроби',
        'Умножение обыкновенной дроби',
        'Решение выражений',
        'Решение уравнений',
        'Задачи на части',
        'Задачи'
      ]
    },
    {
      title: 'Десятичные дроби',
      lessons: [
        'Введение десятичных дробей. Запись и чтение',
        'Сравнение, округление',
        'Сложение и вычитание десятичных дробей',
        'Умножение и деление на 10, 100, 1000 и на целое число',
        'Умножение десятичной дроби',
        'Деление десятичной дроби',
        'Решение уравнений',
        'Задачи'
      ]
    }
  ];

  // Добавляем блоки и уроки
  for (const [index, moduleData] of modules.entries()) {
    const module = new Module({
      title: moduleData.title,
      course: course._id,
      order: index
    });
    await module.save();

    for (const [lessonIndex, lessonTitle] of moduleData.lessons.entries()) {
      const lesson = new Lesson({
        title: lessonTitle,
        module: module._id,
        order: lessonIndex
      });
      await lesson.save();
    }
  }

  console.log('Курс "Математика 5 класс" успешно создан!');
}

module.exports = seedMath5;
